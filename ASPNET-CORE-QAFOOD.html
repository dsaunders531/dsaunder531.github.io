<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1.5, user-scalable=yes, shrink-to-fit=no" />
    <meta charset="utf-8" />

    <meta name="description" content="GitHub project pages for Duncan Saunders (dsaunders531)" />
    <meta name="publisher" content="Duncan Saunders" />
    <meta name="robots" content="index, follow" />

    <meta name="keywords" content="GitHub project page for ASPNET-CORE-QAFOOD" />
    <title>Duncan's Project Pages - ASPNET-CORE-QAFOOD</title>

    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          />
    
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          />

    <link href="css/straightforward.css" rel="stylesheet" />

</head>
<body>
    <header>
        <div class="container">
            <h1>Duncan's GitHub Project Pages</h1>
        </div>
    </header>

    <nav class="navbar navbar-default">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                    <span class="sr-only">Toggle navigation
                    <span class="icon-bar">
                    <span class="icon-bar">
                    <span class="icon-bar">
                </button>
                <a class="navbar-brand" href="index.html">Project pages</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li id="nav_home_index" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Projects<span class="caret"></a>
                        <ul class="dropdown-menu">
                            <li id="nav_home_gitusersearchdemo"><a href="GitUserSearchDemo.html">GitUserSearchDemo</a></li>
                            <li id="nav_home_aspnet-core-qafood"><a href="ASPNET-CORE-QAFOOD.html">ASPNET-CORE-QAFOOD</a></li>
                        </ul>
                    </li>
                </ul>                
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container -->
    </nav>

    <content>
        <div class="container">
            <h2>ASPNET-CORE-QAFOOD</h2>

            <p>This project was created as part of a recuitment process.</p>

            <h3>Requirements</h3>
            <h4>Quality Assurance Food Testing</h4>

            <!-- copied from Word ... -->
            <p>
                    A
                    local food distribution company are looking to employ a number of quality
                    assurance (QA) food testers. They require an online solution for the testers to
                    sign in and submit their food quality grades.
            </p>

            <p>
                    The
                    quality testers will be sent a food parcel through the post containing various
                    items for testing.

            </p>
            <p>Each food item will be tested for:</p>
            <ol>
                <li>Presentation</li>
                <li>Texture</li>
                <li>Aroma</li>
                <li>Flavour</li>
            </ol>
            <p>
                    The
                    system must allow the quality testers to select an item of food from a drop
                    down and enter their marks for each of the four areas. Each of the four areas
                    to be tested will be marked from 1 to 5. The test results page must also
                    display the overall score for the items being tested. All marks must be stored
                    in a database for future reference and allow the testers to modify their scores
                    in case they make a mistake.
            </p>

            <h4>Deliverables:</h4>

            <ul>
                <li>
                    ASP.NET MVC 5 or ASP.NET Core Web Application
                    Solution Files
                </li>
                <li>
                    SQL Server Scripts to recreate the database (if
                    using DB first)
                </li>
                <li>
                   Any documentation that may be required to set up
                    and test the project
                </li>
                <li>
                    A very brief explanation of your approach to
                    design and construction of the application
                </li>
            </ul>
                   
            <h3>Getting the solution</h3>

            <h4>Prerequisites</h4>

            <ul>
                <li>
                    Visual Studio 2017 15.7.4 (community version is OK)
                </li>
                <li>These workloads will need adding:
                    <ul>
                        <li>ASP.Net and web development</li>
                        <li>.Net Core cross-platform development</li>
                    </ul>
                </li>
                <li>These extensions will be useful (Tools-&gt;Extensions and updates)
                    <ul>
                        <li>Bundler and Minifier</li>
                        <li>CompileSass</li>
                    </ul>
                </li>
                <li>ASP.Net Core SDK 2.1.302 
                    <ul>
                        <li>https://www.microsoft.com/net/download</li>
                        <li>https://www.microsoft.com/net/download/thank-you/dotnet-sdk-2.1.302-windows-x64-installer</li>
                        <li>
                            The version is important. There have been some changes since
                            earlier versions and the site will not work with earlier versions.
                        </li>
                    </ul>
                </li>
            </ul>

            <h4>Get the source files:</h4>

            <p>
                    You will need to create an account on <a href="https://github.com">GitHub</a> if you want to use git-bash.
            </p>

            <p>
                    The project can be downloaded in zip
                    format. Go here <a href="https://github.com/dsaunders531/ASPNET-CORE-QAFOOD">https://github.com/dsaunders531/ASPNET-CORE-QAFOOD</a>
                    and select ‘Download Zip’ from the ‘Clone or Download’ dropdown.
            </p>

            <h4>GitHub command line (Git Bash)</h4>
            <ol>
                <li>Open Git-Bash.</li>
                <li>
                    cd to the directory where you want to download the repository.
                </li>
                <li>
                    If you have not configured git-bash add your git
                    user name and email. See the ‘configure tooling’ section in <a href="https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf">https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf</a>.
                </li>
                <li>
                    Run <b>
                        git
                        clone https://github.com/dsaunders531/ASPNET-CORE-QAFOOD.git
                    </b>
                </li>
                <li>
                    If you have problems with permissions, create a
                    folder in C:\ and share it with yourself only with full control.
                </li>
            </ol>

            <h4>Project contents</h4>

            <p>
                    There are 2 projects 'QAFoods' &amp; 'mezzanine.essentials'.
            </p>

            <p>
                    The main project is QAFoods, the other project is my own library with labour saving features.
            </p>

            <h4>Configure the connection strings</h4>

            <p>
                    The web application will throw errors if the connection strings are not configured.
            </p>

            <p>
                    The application targets SQL Server. A local copy
                    of SQLExpress will also work.
            </p>

            <ul>
                <li>
                    Open the solution QAFood.sln.
                    <ul>
                        <li>
                            The first time you open the solution lots of
                            things will be downloaded from NuGet.
                        </li>
                    </ul>
                </li>
                <li>
                    Open the file <b>QAFood\appsettings.json</b>
                    <ul>
                        <li>
                            Add connection string details for Content and
                            Authentication:
                        </li>
                        <li>
                            The database details for both of these can point
                            to the same database.
                        </li>
                        <li>
                            A value like this should be fine for SQL Server or SQL Server
                            Express: <b>

                                Server=[server]\\[instance];Database=[database
                                name];Trusted_Connection=true;MultipleActiveResultSets=true

                            </b>

                        </li>
                    </ul>
                </li>
            </ul>
            <p>
                Do not change any other part of the file or its
                structure!
            </p>
            <p>
                Copy the entire contents of <b>appsettings.json</b>
                to <b>appsettings.Development.json </b>without changing its structure. This file
                is nested under appsettings.json.
            </p>     

            <h4>Create the database:</h4>

            <p>There are 2 ways to create the database.</p>

            <ol>
                <li>
                    Run the application - it is configured to
                    automatically create and update the database.
                </li>
                <li>
                    Or, View -&gt; Other Windows -&gt; Package
                    manager console.
                    <ul>
                        <li>
                            Type 'Update-Database -Context AuthenticationDbContext' at the prompt
                        </li>
                        <li>
                            After a while...
                        </li>
                        <li>
                            Type 'Update-Database -Context ApplicationDbContext'at the prompt
                        </li>
                    </ul>
                </li>
            </ol>

            <p>
                
                    Run the program by selecting <b>QAFood</b>
                    in solution explorer and press the <b>F5</b> key.
                
            </p>


            <h3>Explanation</h3>

            <p>
                
                    When the application starts, you will see a
                    default home page in your browser.
                
            </p>

            <h4>There is a requirement for users to login:</h4>

            <p>
                
                    To perform a review, you need to login. By
                    default a user has already been added ‘admin@example.com’ with password
                    ‘Password1!’. You can add a new login by clicking on the Register menu item.
                
            </p>

            <p>
                
                    Note: https is not used in the site and the
                    urls are not configured for https. Do not host this site on an external facing
                    server.
                
            </p>

            <p>
                
                    After you have logged in, an additional
                    menu item is displayed ‘Review a food parcel’.
                
            </p>

            <h4>Testers have been sent a parcel through the post.</h4>

            <p>
                
                    Click on ‘Review a food parcel’ to get a
                    list of food parcels and their food items. Click on the link ‘Review this
                    parcel’ to start a review.
                
            </p>

            <h4>
                
                    Testers select the food item from the parcel using a drop
                    down menu.
                
            </h4>

            <p>
                
                    After clicking on ‘Review this parcel’ you
                    are taken to a form with a dropdown. The list contains the food items in the
                    parcel. Select an item and the options below will become active.
                
            </p>

            <h4>

                        There are four areas to be
                        tested which are marked from 1 to 5.
                    
                
            </h4>

            <p>
                
                    Users can grade their food item based on 4
                    categories using radio buttons. The default value for all categories is
                    ‘Excellent’.
                
            </p>

            <p>
                
                    After a review has been saved, users can
                    review another item. If they want to change their mind, they can select the
                    parcel and food item. Their saved values are displayed and can be changed.
                
            </p>

            <h4>Test results page</h4>

            <p>
                
                    If you have logged in as <b>admin@example.com</b>,
                    you will have an additional menu entry to view the test results.
                
            </p>

            <h3>Code notes</h3>

            <p>
                
                    The standard part of the application is
                    based on an existing template I use. Using a template is useful as it helps
                    speed up creating MVC apps which require a lot of infrastructure which takes a
                    long time to create. There are lots of things in the code which are not
                    required for this solution.
                
            </p>

            <p>
                
                    The main things to be looking at are
                    Models\ApplicationModels.cs, Controllers\ReviewController, Views\Review\* and
                    ViewModels\ReviewViewModels.
                
            </p>

            <p>
                
                    Application Identity is part of the visual
                    studio template. Unfortunately it adds lots of ready-made code and it’s
                    difficult to reconfigure the views. The implementation I have added uses
                    standard role based security and simpler login and registration forms.
                
            </p>

            <p>
                
                    UI customization is driven by CSS files
                    managed via SASS.
                
            </p>

            <p>There is a little bit of jQuery, AJAX and web api work on the ReviewProcess page where the data is obtained and saved via api calls.</p>

            <p>
                
                    The review part is not perfect; I wanted to
                    create something which would look after itself. For example, if a test category
                    was renamed or added, it would require no code changes. While this is possible
                    to do with an API and a lot of JavaScript I have not done it this way as it
                    saved some time.
                
            </p>

            <p>The code is structured into a data access layer (QAFoods.Dal), business logic layer (QAFoods.BLL), unit tests and the main application.</p>
            <p>The data access layer uses entity framework and will automatically create and update the underlying database.</p>
            <p>The business logic layer provides services to the main application. The services simplify the application controllers. There is no need to pass repositories around, these are automatically configured by the services.</p>
            <p>Using services to do all the data processing and business rules means they can be injected wherever they are needed. For example, the test result page uses injection to get an instance of the test result service 
            which contains all the calculations the page needs.</p>
            <p>1 unit test has been provided. It uses a fake repository to prove that data is saved.</p>

            <div class="alert alert-info">
                <a href="https://github.com/dsaunders531/ASPNET-CORE-QAFOOD">Get the project.</a>
            </div>
        </div>
    </content>

    <footer>
        <div class="container">
            <p>
                Made with <a href="https://pages.github.com/">GitHub pages</a>
            </p>
        </div>

    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">
    </script>
    <script src="js/navbar.js" type="text/javascript"></script>
</body>
</html>